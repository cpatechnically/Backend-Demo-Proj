(this.webpackJsonpnpxdemo=this.webpackJsonpnpxdemo||[]).push([[0],{19:function(e){e.exports=JSON.parse('{"apiEndpoint":"http://127.0.0.1:8005/api"}')},58:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){var a={"./survey_1.json":[88,3],"./survey_2.json":[89,4],"./survey_3.json":[90,5]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n.t(r,3)}))}r.keys=function(){return Object.keys(a)},r.id=84,e.exports=r},85:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(22),s=n.n(c),o=(n(58),n(6)),i=n(2),l=n(3),u=n(5),d=n(4),h=n(8),b=n(7),j=n(38),p=n(9),m=n.n(p),f=n(17),v=n(0),O=function(e){var t=e.items,n=e.textProperty,a=e.valueProperty,r=e.selectedItem,c=e.onItemSelect;return Object(v.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(v.jsx)("li",{onClick:function(){return c(e)},className:e===r?"list-group-item active":"list-group-item",children:e[n]},e[a])}))})};O.defaultProps={textProperty:"name",valueProperty:"_id"};var x=O,g=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).raiseSort=function(t){var n=Object(b.a)({},e.props.sortColumn);console.log("sortColumns: ",n),n.path===t?n.order="asc"===n.order?"desc":"asc":(n.path=t,n.order="asc"),e.props.onSort(n),console.log("sortColumns: ",n)},e.renderSortIcon=function(t){console.log("Column: ",t.path);var n=e.props.sortColumn;return console.log("tableHeader",n),t.path!==n.path?null:"asc"===n.order?Object(v.jsx)("i",{className:"fa fa-sort-asc"}):Object(v.jsx)("i",{className:"fa fa-sort-desc"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:this.props.columns.map((function(t){return Object(v.jsxs)("th",{className:"clickable",onClick:function(){return e.raiseSort(t.path)},children:[t.label," ",e.renderSortIcon(t)]},t.path||t.key)}))})})}}]),n}(a.Component),y=g,k=n(18),C=n.n(k),S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t){return t.content?t.content(e):C.a.get(e,t.path)},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return console.log("data",n,"Columns:",a),Object(v.jsx)("tbody",{children:n.map((function(t){return Object(v.jsx)("tr",{children:a.map((function(n){return Object(v.jsx)("td",{children:e.renderCell(t,n)},e.createKey(t,n))}))},t._id)}))})}}]),n}(a.Component),N=S,P=function(e){var t=e.columns,n=e.sortColumn,a=e.onSort,r=e.data;return console.log("data:",r,"Columns:",t,"sortColumn:",n,"onSort:",a),Object(v.jsxs)("table",{className:"table",children:[Object(v.jsx)(y,{columns:t,sortColumn:n,onSort:a}),Object(v.jsx)(N,{columns:t,data:r})]})},w=function(e){var t="fa fa-heart";return e.liked||(t+="-o"),Object(v.jsx)("i",{onClick:e.onClick,style:{cursor:"pointer"},className:t,"aria-hidden":"true"})},I=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).columns=[{path:"title",label:"Title",content:function(e){return Object(v.jsx)(o.b,{to:"/movies/".concat(e._id),children:e.title})}},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"like",content:function(t){return Object(v.jsx)(w,{liked:t.liked,onClick:function(){return e.props.onLike(t)}})}},{key:"delete",content:function(t){return Object(v.jsx)("button",{onClick:function(){return e.props.onDelete(t)},className:"btn btn-danger btn-sm",children:"Delete"})}}],e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.movies,n=e.onSort,a=e.onDelete,r=e.sortColumn;return Object(v.jsx)(P,{columns:this.columns,data:t,sortColumn:r,onSort:n,onDelete:a})}}]),n}(a.Component),R=I,_=function(e){var t=e.value,n=e.onChange;return Object(v.jsx)("input",{type:"text",name:"query",className:"form-control my-3",placeholder:"Search...",value:t,onChange:function(e){return n(e.currentTarget.value)}})},D=function(e){var t=e.itemsCount,n=e.pageSize,a=e.currentPage,r=e.onPageChange;console.log("pagination: ",a,n,t);var c=Math.ceil(t/n);if(console.log("page count",c),1===c)return null;var s=C.a.range(1,c+1);return Object(v.jsx)("nav",{children:Object(v.jsx)("ul",{className:"pagination",children:s.map((function(e){return Object(v.jsx)("li",{className:e===a?"page-item active":"page-item",children:Object(v.jsx)("a",{className:"page-link",onClick:function(){return r(e)},children:e})},e)}))})})},T=n(26),L=n.n(T),M=n(19),A=M.apiEndpoint+"/auth";function q(e,t){return E.post(A,{email:e,password:t})}L.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||alert("An unexpected error occured."),Promise.reject(e)}));var F,G,E={get:L.a.get,post:L.a.post,put:L.a.put,delete:L.a.delete},U="".concat(M.apiEndpoint,"/vidly");function B(e){return F="/movies/",G="".concat(U).concat(F),"".concat(G,"/").concat(e)}function Y(e){return E.delete(B(e))}var H,z="".concat(M.apiEndpoint,"/vidly");function J(e,t,n){var a=(t-1)*n;return C()(e).slice(a).take(n).value()}var Q=n(39),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],genres:[],currentPage:1,pageSize:4,searchQuery:"",selectedGenre:null,sortColumn:{path:"title",order:"asc"}},e.handleDelete=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state.movies,r=a.filter((function(e){return e.id!==n.id})),e.setState({movies:r});try{Y(n.id)}catch(c){c.response&&404===c.response.status&&Q.b.error("this movie has already been deleted"),e.setState({movies:a})}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLike=function(t){console.log("hanlde like",t);var n=Object(j.a)(e.state.movies),a=n.indexOf(t);n[a]=Object(b.a)({},n[a]),n[a].liked=!n[a].liked,e.setState({movies:n})},e.handlePageChange=function(t){console.log("current page",t),e.setState({currentPage:t})},e.handleGenreSelect=function(t){e.setState({selectedGenre:t,searchQuery:"",currentPage:1})},e.handleSearch=function(t){e.setState({searchQuery:t,selectedGenre:null,currentPage:1})},e.handleSort=function(e){},e.getPagedData=function(){var t=e.state,n=t.pageSize,a=t.currentPage,r=t.sortColumn,c=t.selectedGenre,s=t.searchQuery,o=t.movies,i=o;s?i=o.filter((function(e){return e.title.toLowerCase().startsWith(s.toLowerCase())})):c&&c.id&&(i=o.filter((function(e){return e.genre.id===c.id})));var l=J(C.a.orderBy(i,[r.path],[r.order]),a,n);return{totalCount:i.length,data:l}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"/genre/",H="".concat(z).concat("/genre/"),E.get(H);case 2:return t=e.sent,n=t.data,a=[{id:"",name:"All Genres"}].concat(Object(j.a)(n)),console.log("genres",a),e.next=8,F="/movies/",G="".concat(U).concat(F),console.log("get movies apiEp",G),E.get(G);case 8:r=e.sent,c=r.data,console.log("movies",c),this.setState({movies:c,genres:a});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movies.length,t=this.state,n=t.pageSize,a=t.currentPage,r=t.sortColumn,c=t.searchQuery;if(0===e)return Object(v.jsx)("p",{children:"There are no movies in the database."});var s=this.getPagedData(),i=s.totalCount,l=s.data;return Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)(Q.a,{}),Object(v.jsx)("div",{className:"col-3",children:Object(v.jsx)(x,{items:this.state.genres,selectedItem:this.state.selectedGenre,onItemSelect:this.handleGenreSelect})}),Object(v.jsxs)("div",{className:"col",children:[Object(v.jsx)(o.b,{to:"/movies/new",className:"btn btn-primary",style:{marginBottom:20},children:"New Movie"}),Object(v.jsxs)("p",{children:["Showing ",i," movies in the database."]}),Object(v.jsx)(_,{value:c,onChange:this.handleSearch}),Object(v.jsx)(R,{movies:l,sortColumn:r,onLike:this.handleLike,onDelete:this.handleDelete,onSort:this.handleSort}),Object(v.jsx)(D,{itemsCount:i,pageSize:n,currentPage:a,onPageChange:this.handlePageChange})]})]})}}]),n}(a.Component),X=V,K=n(11),W=n.n(K),Z=n(20),$=n(32),ee=n(33),te=["name","label","error"],ne=function(e){var t=e.name,n=e.label,a=e.error,r=Object(ee.a)(e,te);return Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:t,children:n}),Object(v.jsx)("input",Object(b.a)(Object(b.a)({},r),{},{id:t,name:t,className:"form-control"})),a&&Object(v.jsx)("div",{className:"alert alert-danger",children:a})]})},ae=["name","label","options","error"],re=function(e){var t=e.name,n=e.label,a=e.options,r=e.error,c=Object(ee.a)(e,ae);return Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:t,children:n}),Object(v.jsxs)("select",Object(b.a)(Object(b.a)({name:t,id:t},c),{},{className:"form-control",children:[Object(v.jsx)("option",{value:""}),a?a.map((function(e){return Object(v.jsx)("option",{value:e._id,children:e.name},e._id)})):""]})),r&&Object(v.jsx)("div",{className:"alert alert-danger",children:r})]})},ce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{}},e.validate=function(){var t=W.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!t)return null;var n,a={},r=Object($.a)(t.details);try{for(r.s();!(n=r.n()).done;){var c=n.value;a[c.path[0]]=c.message}}catch(s){r.e(s)}finally{r.f()}return a},e.validateProperty=function(t){var n=t.name,a=t.value,r=Object(Z.a)({},n,a),c=Object(Z.a)({},n,e.schema[n]),s=W.a.validate(r,c).error;return s?s.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),n||e.doSubmit()},e.handleChange=function(t){var n=t.currentTarget,a=Object(b.a)({},e.state.errors),r=e.validateProperty(n);r?a[n.name]=r:delete a[n.name];var c=Object(b.a)({},e.state.data);c[n.name]=n.value,e.setState({data:c,errors:a})},e}return Object(l.a)(n,[{key:"renderButton",value:function(e){return Object(v.jsx)("button",{disabled:this.validate(),className:"btn btn-primary",children:e})}},{key:"renderSelect",value:function(e,t,n){var a=this.state,r=a.data,c=a.errors;return Object(v.jsx)(re,{name:e,value:r[e]?r[e]:[],label:t,options:n,onChange:this.handleChange,error:c[e]})}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=this.state,r=a.data,c=a.errors;return Object(v.jsx)(ne,{type:n,name:e,value:r[e],label:t,onChange:this.handleChange,error:c[e]})}}]),n}(a.Component),se=ce,oe=[{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"}];var ie=[{_id:"5b21ca3eeb7f6fbccd471815",title:"Terminator",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:6,dailyRentalRate:2.5,publishDate:"2018-01-03T19:04:28.809Z",liked:!0},{_id:"5b21ca3eeb7f6fbccd471816",title:"Die Hard",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:5,dailyRentalRate:2.5},{_id:"5b21ca3eeb7f6fbccd471817",title:"Get Out",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:8,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471819",title:"Trip to Italy",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181a",title:"Airplane",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181b",title:"Wedding Crashers",genre:{_id:"5b21ca3eeb7f6fbccd471814",name:"Comedy"},numberInStock:7,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd47181e",title:"Gone Girl",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:7,dailyRentalRate:4.5},{_id:"5b21ca3eeb7f6fbccd47181f",title:"The Sixth Sense",genre:{_id:"5b21ca3eeb7f6fbccd471820",name:"Thriller"},numberInStock:4,dailyRentalRate:3.5},{_id:"5b21ca3eeb7f6fbccd471821",title:"The Avengers",genre:{_id:"5b21ca3eeb7f6fbccd471818",name:"Action"},numberInStock:7,dailyRentalRate:3.5}];function le(e){return ie.find((function(t){return t._id===e}))}function ue(e){var t=ie.find((function(t){return t._id===e._id}))||{};return t.title=e.title,t.genre=oe.find((function(t){return t._id===e.genreId})),t.numberInStock=e.numberInStock,t.dailyRentalRate=e.dailyRentalRate,t._id||(t._id=Date.now().toString(),ie.push(t)),t}var de=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{title:"",genreId:"",numberInStock:"",dailyRentalRate:""},genres:[],errors:{}},e.schema={_id:W.a.string(),title:W.a.string().required().label("Title"),genreId:W.a.string().required().label("Genre"),numberInStock:W.a.number().required().min(0).max(100).label("Number in Stock"),dailyRentalRate:W.a.number().required().min(0).max(10).label("Daily Rental Rate")},e.doSubmit=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.data,console.log("submit data",n),t.next=4,ue(n);case 4:e.props.history.push("/movies");case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"populateGenres",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe;case 2:t=e.sent,n=t.data,this.setState({genres:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateMovie",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("props",this.props.match),e.prev=1,"new"!==(t=this.props.match.params.id)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,le(t);case 7:n=e.sent,a=n.data,this.setState({data:this.mapToViewModel(a)}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateGenres();case 2:return e.next=4,this.populateMovie();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return{_id:e._id,title:e.title,genreId:e.genre._id,numberInStock:e.numberInStock,dailyRentalRate:e.dailyRentalRate}}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Movie Form"}),Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("title","Title"),this.renderSelect("genreId","Genre",this.state.genres),this.renderInput("numberInStock","Number in Stock","number"),this.renderInput("dailyRentalRate","Rate"),this.renderButton("Save")]})]})}}]),n}(se),he=de,be=function(e){var t=e.djurl?e.djurl:"/";return console.log("NavBar - Rendered"),Object(v.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(v.jsx)(o.b,{className:"navbar-brand",to:"".concat(t),children:"Vidly"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(v.jsxs)("div",{className:"navbar-nav",children:[Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/home"),children:"Home"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/movies"),children:"Movies"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/admin"),children:"Dashboard"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/customers"),children:"Customers"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/rentals"),children:"Rentals"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/login"),children:"Login"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/register"),children:"Register"}),Object(v.jsx)(o.c,{className:"nav-item nav-link",to:"".concat(t,"/logout"),children:"Logout"})]})})]})},je=function(){return Object(v.jsx)("h1",{children:"Home"})},pe=M+"/users";function me(e){return E.post(pe,{email:e.username,password:e.password,name:e.name})}var fe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:"",name:""},errors:{}},e.schema={username:W.a.string().required().email().label("Username"),password:W.a.string().required().min(5).label("Password"),name:W.a.string().required().label("Name")},e.doSubmit=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,me(e.state.data);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((n=Object(b.a)({},e.state.errors)).username=t.t0.response.data,e.setState({errors:n}));case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Register"}),Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Register")]})]})}}]),n}(se),ve=fe,Oe=function(){return Object(v.jsx)("h1",{children:"Not Found"})},xe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:""},errors:{}},e.schema={username:W.a.string().required().label("Username"),password:W.a.string().required().label("Password")},e.doSubmit=Object(f.a)(m.a.mark((function t(){var n,a,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.state.data,t.next=4,q(n.username,n.password);case 4:a=t.sent,r=a.data,console.log(r),localStorage.setItem("token",r),e.props.history.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((c=Object(b.a)({},e.state.errors)).username=t.t0.response.data,e.setState({errors:c}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Login"}),Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderButton("Login")]})]})}}]),n}(se),ge=xe,ye=(a.Component,function(){return Object(v.jsx)("h1",{children:"Customers"})}),ke=function(){return Object(v.jsx)("h1",{children:"Rentals"})},Ce=(n(82),n(83),"/vidly"),Se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(be,{djurl:Ce}),Object(v.jsx)("div",{className:"container",children:Object(v.jsxs)(h.d,{children:[Object(v.jsx)(h.b,{path:"".concat(Ce,"/movies/:id"),component:he}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/home"),component:je}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/not-found"),component:Oe}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/movies"),component:X}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/rentals"),component:ke}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/customers"),component:ye}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/login"),component:ge}),Object(v.jsx)(h.b,{path:"".concat(Ce,"/register"),component:ve}),Object(v.jsx)(h.a,{from:"".concat(Ce,"/"),exact:!0,to:"".concat(Ce,"/movies")}),Object(v.jsx)(h.a,{to:"".concat(Ce,"/not-found")})]})})]})}}]),n}(a.Component),Ne=Se,Pe=n(24);function we(e){switch(e){case"text":case"email":case"number":case"textarea":return!0;default:return!1}}var Ie=function(e){var t=Object(a.useState)(1),r=Object(Pe.a)(t,2),c=r[0],s=r[1],o=Object(a.useState)(!1),i=Object(Pe.a)(o,2),l=i[0],u=i[1],d=Object(a.useState)({}),h=Object(Pe.a)(d,2),j=h[0],p=h[1],m=Object(a.useState)([]),f=Object(Pe.a)(m,2),O=f[0],x=f[1],g=e.surveyId;Object(a.useEffect)((function(){g&&n(84)("./survey_".concat(g,".json")).then((function(e){x(e.default)}))}));var y=O?O.filter((function(e){return e.page===c})):[];return Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.persist();var t,n=Object($.a)(e.target.elements);try{var a=function(){var e=t.value;if(we(e.type)&&(j[e.name]=e.value),"select-one"===e.type&&(console.log(e.name,e.value),j[e.name]=e.value),"select-multiple"===e.type){var n=[].filter.call(e.options,(function(e){return e.selected})).map((function(e){return e.value}));j[e.name]=n}e.checked&&(j[e.name]=e.value),p(j);var a=c+1,r=O?O.filter((function(e){return e.page===a})):[];l?(console.log("your done",j),alert("Thank you!"),s(1),p({}),u(!1)):0===r.length?u(!0):s(a)};for(n.s();!(t=n.n()).done;)a()}catch(r){n.e(r)}finally{n.f()}},children:[!0!==l&&y.map((function(e,t){var n="form-control mb-2 animate__animated animate__fadeIn",a="input-".concat(t,"-").concat(c);return"radio"===e.type||"checkbox"===e.type?Object(v.jsx)(_e,Object(b.a)({object:e,className:n},e),a):"select"===e.type?Object(v.jsx)(Re,Object(b.a)({className:n,object:e},e),a):Object(v.jsx)(De,Object(b.a)({className:n},e),a)})),!0===l&&Object(v.jsx)("p",{children:"Are you finished?"}),Object(v.jsx)("button",{name:"save_btn",type:"submit",className:"btn btn-primary my-5 animate__animated animate__fadeIn animate__delay-2s",children:!0===l?"Save":"Contine"})]})},Re=function(e){var t=e.object;return Object(v.jsxs)("select",{name:t.name,className:e.className,multiple:t.multiple,children:[Object(v.jsx)("option",{hidden:!0,value:!0,children:"Select an Option"}),t.options.map((function(n,a){return Object(v.jsx)("option",{value:n.value,id:"".concat(t.name,"-").concat(a),className:"form-check ".concat(e.optionClassName),children:n.label},"".concat(t.type,"-").concat(a))}))]})},_e=function(e){var t=e.object;return Object(v.jsx)("div",{className:e.className,children:t.options.map((function(n,a){return Object(v.jsxs)("div",{className:"form-check ".concat(e.optionClassName),children:[Object(v.jsx)("input",{className:"form-check-input",type:t.type,required:e.required,value:n.value,name:t.name,id:"".concat(t.name,"-").concat(a)}),Object(v.jsx)("label",{className:"form-check-label",htmlFor:"".concat(t.name,"-").concat(a),children:n.label})]},"".concat(t.type,"-").concat(a))}))})},De=function(e){var t=function(e,t){var n=Object(a.useState)(e||""),r=Object(Pe.a)(n,2),c=r[0],s=r[1];return{value:c,handleChange:function(e){var n=e.target.value;s(n),t&&t(e.target.name,n)}}}(e.defaultValue,e.triggerCallback),n=t.value,r=t.handleChange,c=we(e.type)?e.type:"text",s={className:e.className?e.className:"form-control",onChange:r,required:e.requred,value:n,type:c,placeholder:e.placeholder?e.placeholder:"Your text...",name:e.name?e.name:"".concat(c,"_").concat(e.key)};return"textarea"===c?Object(v.jsx)("textarea",Object(b.a)({},s)):Object(v.jsx)("input",Object(b.a)({},s))},Te=function(e){return Object(v.jsxs)("div",{className:"col-6 mx-auto text-center",children:[Object(v.jsx)("h1",{className:"mb-5",children:"Hello There"}),Object(v.jsx)(Ie,{surveyId:1})]})},Le=function(){return Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"/",children:"Home"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"/products",children:"Products"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"/posts/2018/06",children:"Posts"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"/admin",children:"Admin"})})]})},Me=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={products:[{id:1,name:"Product 1"},{id:2,name:"Product 2"},{id:3,name:"Product 3"}]},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Products"}),Object(v.jsx)("ul",{children:this.state.products.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"/products/".concat(e.id),children:e.name})},e.id)}))})]})}}]),n}(a.Component),Ae=Me,qe=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Posts"}),"Year: , Month:"]})},Fe=function(){return Object(v.jsx)("h1",{children:"Home"})},Ge=function(e){e.match;return Object(v.jsx)("div",{children:Object(v.jsx)("h1",{children:"Admin Dashboard"})})},Ee=(a.Component,n(85),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(Le,{}),Object(v.jsx)("div",{className:"content",children:Object(v.jsxs)(h.d,{children:[Object(v.jsx)(h.b,{path:"/products",component:Ae}),Object(v.jsx)(h.b,{path:"/posts",component:qe}),Object(v.jsx)(h.b,{path:"/admin",component:Ge}),Object(v.jsx)(h.b,{path:"/",component:Fe})]})})]})}}]),n}(a.Component)),Ue=Ee,Be=n(14),Ye=(n(35),n(21)),He=n.n(Ye),ze=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.post,t=this.props.elClass,n=("card"===t?"d-block":"d-none").showContent;return Object(v.jsx)("div",{children:void 0!==e?Object(v.jsxs)("div",{className:t,children:[Object(v.jsxs)("h1",{children:["Title ",e.title]}),Object(v.jsx)("p",{className:n,children:e.content})]}):""})}}]),n}(a.Component),Je=ze,Qe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).togglePostListClass=a.togglePostListClass.bind(Object(Be.a)(a)),a.handleNewPost=a.handleNewPost.bind(Object(Be.a)(a)),a.loadMorePosts=a.loadMorePosts.bind(Object(Be.a)(a)),a.state={posts:[],postsListClass:"card",next:null,previous:null,author:!1,count:0},a}return Object(l.a)(n,[{key:"loadMorePosts",value:function(){var e=this.state.next;null===e&&void 0===e||this.loadPosts(e)}},{key:"loadPosts",value:function(e){var t="/api/posts/";void 0!==e&&(t=e);var n=this,a={method:"GET",headers:{"Content-Type":"application/json"}},r=He.a.load("csrftoken");void 0!==r&&(a.credentials="include",a.headers["X-CSRFToken"]=r),fetch(t,a).then((function(e){return e.json()})).then((function(e){console.log(e),n.setState({posts:n.state.posts.concat(e.results),next:e.next,previous:e.previous,author:e.author,count:e.count})}))}},{key:"handleNewPost",value:function(e){var t=this.state.posts;t.unshift(e),this.setState({posts:t})}},{key:"togglePostListClass",value:function(e){e.preventDefault(),""===this.state.postsListClass?this.setState({postsListClass:"card"}):this.setState({postsListClass:""})}},{key:"componentDidMount",value:function(){this.setState({posts:[],postsListClass:"card",next:null,previous:null,author:!1,count:0}),this.loadMorePosts()}},{key:"render",value:function(){var e=this.state.posts,t=this.state.postsListClass,n=this.state.author,a=this.state.next;return Object(v.jsxs)("div",{children:[!0===n?Object(v.jsx)(o.b,{className:"mr-2",maintainScrollPosition:!1,to:{pathname:"/posts/create/",state:{fromDashboard:!1}},children:"Create Post"}):"",Object(v.jsx)("button",{onClick:this.togglePostListClass,children:"Toggle Class"}),e.length>0?e.map((function(e,n){return Object(v.jsx)(Je,{post:e,elClass:t})})):Object(v.jsx)("p",{children:"No Posts Found"}),null!==a?Object(v.jsx)("button",{onClick:this.loadMorePosts,children:"Load more"}):""]})}}]),n}(a.Component),Ve=n(37),Xe=n.n(Ve),Ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleSubmit=a.handleSubmit.bind(Object(Be.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(Be.a)(a)),a.handleDraftChange=a.handleDraftChange.bind(Object(Be.a)(a)),a.clearForm=a.clearForm.bind(Object(Be.a)(a)),a.postTitleRef=r.a.createRef(),a.postContentRef=r.a.createRef(),a.state={draft:!1,title:null,content:null,publish:null,errors:{}},a}return Object(l.a)(n,[{key:"createPost",value:function(e){var t=He.a.load("csrftoken"),n=this;if(void 0!==t){var a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify(e),credentials:"include"};fetch("/api/posts/",a).then((function(e){return e.json()})).then((function(e){console.log(e),n.props.newPostItemCreated&&n.props.newPostItemCreated(e),n.defaultState(),n.clearForm()})).catch((function(e){}))}}},{key:"updatePost",value:function(e){var t=this.props.post,n="/api/posts/".concat(t.slug,"/"),a=He.a.load("csrftoken"),r=this;if(void 0!==a){var c={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify(e),credentials:"include"};fetch(n,c).then((function(e){return e.json()})).then((function(e){console.log(e),r.props.postItemUpdated&&r.props.postItemUpdated(e)})).catch((function(e){}))}}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.state);var t=this.state;void 0!==this.props.post&&this.updatePost(t)}},{key:"handleInputChange",value:function(e){e.preventDefault(),console.log(e.target.name,e.target.value);var t=e.target.name,n=e.target.value;"title"===t&&n.length>120&&alert("This title is too long"),this.setState(Object(Z.a)({},t,n))}},{key:"handleDraftChange",value:function(){this.setState({draft:!this.state.draft})}},{key:"clearForm",value:function(e){e&&e.preventDefault(),this.postCreateForm.reset(),this.defaultState()}},{key:"clearFormRefs",value:function(){this.postTitleRef.current="",this.postContentRef.current=""}},{key:"defaultState",value:function(){this.setState({draft:!1,title:null,content:null,publish:Xe()(new Date).format("YYYY-MM-DD")})}},{key:"componentDidMount",value:function(){var e=this.props.post;void 0!==e?this.setState({draft:e.draft,title:e.title,content:e.content,publish:Xe()(e.publish).format("YYYY-MM-DD")}):this.defaultState()}},{key:"render",value:function(){var e=this,t=this.state.publish,n=this.state.title,a=this.state.content;this.props.post;return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:this.handleSubmit,ref:function(t){return e.postCreateForm=t},children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"title",children:"Post Title"}),Object(v.jsx)("input",{type:"text",id:"title",name:"title",value:n,className:"form-control",placeholder:"title",ref:this.postTitleRef,onChange:this.handleInputChange,required:"required"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"content",children:"Content"}),Object(v.jsx)("textarea",{id:"content",name:"content",value:a,className:"form-control",placeholder:"Post Content",ref:this.postContentRef})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsxs)("label",{for:"draft",children:[Object(v.jsx)("input",{type:"checkbox",checked:this.state.draft,id:"draft",name:"title",className:"form-control",onChange:this.handleInputChange,required:"required"}),"Draft"]}),Object(v.jsx)("button",{onClick:function(t){t.preventDefault(),e.handleDraftChange()},children:"Toggle Draft"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"publish",children:"Publish Date"}),Object(v.jsx)("input",{type:"date",id:"publish",name:"publish",className:"form-control",onChange:this.handleInputChange,value:t,required:"required"})]}),Object(v.jsx)("button",{className:"btn btn-primary",children:"Save"}),Object(v.jsx)("button",{className:"btn btn-danger",onClick:this.clearForm,children:"Clear"})]})})}}]),n}(a.Component),We=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handlePostItemUpdated=a.handlePostItemUpdated.bind(Object(Be.a)(a)),a.state={slug:null,post:null,doneLoading:!1},a}return Object(l.a)(n,[{key:"handlePostItemUpdated",value:function(e){this.setState({post:e})}},{key:"loadPost",value:function(e){var t="/api/posts/".concat(e,"/"),n=this,a={method:"GET",headers:{"Content-Type":"application/json"}},r=He.a.load("csrftoken");void 0!==r&&(a.credentials="include",a.headers["X-CSRFToken"]=r),fetch(t,a).then((function(e){return 404===e.status&&console.log("Page not found"),e.json()})).then((function(e){console.log("resp data",e),e.detail?n.setState({doneLoading:!0,post:e}):n.setState({doneLoading:!0,posts:e})}))}},{key:"componentDidMount",value:function(){if(this.setState({slug:null,post:null}),this.props.match){var e=this.props.match.params.slug;this.setState({slug:e,doneLoading:!1}),this.loadPost(e)}}},{key:"render",value:function(){var e=this.state.doneLoading,t=this.state.post;return Object(v.jsx)("p",{children:!0===e?Object(v.jsx)("div",{children:null===t?"Not Found":Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:t.title}),t.slug,Object(v.jsx)(o.b,{to:{pathname:"/posts",state:{fromDashboard:!1}},children:"Posts"}),Object(v.jsx)(o.b,{to:{pathname:"/posts/create/",state:{fromDashboard:!1}},children:"Create Posts"}),!0===t.owner?Object(v.jsx)(Ke,{post:t,postItemUpdated:this.handlePostItemUpdated}):""]})}):"Loading..."})}}]),n}(a.Component),Ze=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:"Create Post"}),Object(v.jsx)(Ke,{})]})}}]),n}(a.Component),$e=Ze,et=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)(o.a,{children:Object(v.jsxs)(h.d,{children:[Object(v.jsx)(h.b,{exact:!0,path:"/posts/create",component:$e}),Object(v.jsx)(h.b,{exact:!0,path:"/posts",component:Qe}),Object(v.jsx)(h.b,{exact:!0,path:"/posts/:slug",component:We}),Object(v.jsx)(h.b,{component:Qe})]})})}}]),n}(a.Component),tt=et,nt=document.getElementById("vidlyapp");nt&&s.a.render(Object(v.jsx)(o.a,{children:Object(v.jsx)(Ne,{})}),nt);var at=document.getElementById("surveyapp");at&&s.a.render(Object(v.jsx)(o.a,{children:Object(v.jsx)(Te,{})}),at);var rt=document.getElementById("routing-demo");rt&&s.a.render(Object(v.jsx)(o.a,{children:Object(v.jsx)(Ue,{})}),rt);var ct=document.getElementById("postsapp");ct&&s.a.render(Object(v.jsx)(o.a,{children:Object(v.jsx)(tt,{})}),ct)}},[[87,1,2]]]);
//# sourceMappingURL=main.d02311f3.chunk.js.map